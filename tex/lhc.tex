\section{The LHC accelerator and the CMS experiment}\label{sec:lhc-cms}
\subsection{The Large Hadron Collider}\label{subsec:lhc}

The Large Hadron Collider (LHC) at the European Organisation for Nuclear Research (CERN), in Geneva, Switzerland is the highest-energy particle accelerator constructed to date. 
It is designed to operate at a centre of mass (CoM) energy of 14\TeV, through two 7\TeV proton beams travelling in 2808 bunches of up to $1.15 \times 10^{11}$ protons at a collision rate of 25\nsm which corresponds to a design luminosity of $10^{34}\percms$. 
The LHC can also operate in a heavy-ion mode, where lead ions are collided at 2.76\TeV per nucleon usually for one month a year~\cite{Bayatian:2006zz}.

The beams collide at four interaction points around the LHC, with one of the four major experiments being based at each of them. 
The experiments are: A Toroidal LHC Apparatus (ATLAS) and the Compact Muon Solenoid (CMS) detectors, which are the two multi-purpose experiments; the Large Hadron Collider beauty (LHCb) is an experiment which specialises in b-physics and; A Large Ion Collider Experiment (ALICE), as the name suggests, specialises in heavy ion physics~\cite{Bruning:782076}.

Three smaller experiments are situated close to one of the four main experiments and use the same collision points.
Both the TOTal Elastic and diffractive cross section Measurement (TOTEM) and LHC-forward (LHCf) experiments study diffractive physics in the very-forward regions of collisions at the CMS and ATLAS experiments' collision points respectively.
Monopole and Exotics Detector At the LHC (MoEDAL) shares the LHCb experiment's cavern and performs direct searches for magnetic monopoles and highly ionising stable and pseudo-stable massive particles.

\subsubsection{Motivation}
The core motivations behind the LHC are to shed light on the nature of the electroweak symmetry breaking, which the Higgs was presumed and found to be responsible, and to probe the consistency of the SM above the \TeV level through precision measurements of SM parameters and the Higgs mechanism.
Alternative theories to the SM, such as SUSY theories, additional dimensions or new fundamental forces and particles are expected to emerge at and above the TeV level, giving the potential to ascertain whether these theories have any basis beyond mere conjecture.

In order to explore and permit the discovery of physics at the \TeV level, the total centre of mass energy has to be greater than the energy region being explored as, due to the composite nature of the proton, only a fraction of the collision centre of mass energy is available.
Access to physics beyond the \TeV level is not excluded	as some signals would be ``unmissable'', but the majority of physics would be limited by statistics.
Compared to the total inelastic cross section, the production cross section of the Higgs boson and hypothesised SUSY particles, if they have \TeV masses (and exist), are predicted to be many orders of magnitude smaller.
Measurements of such processes, as well as precision measurements of SM parameters, require a high interaction rate, and consequently the LHC has a high beam luminosity so that there sufficient statistics available.
Protons are delivered in 2808 bunches per beam, as opposed to a continuous beam, which at design luminosity will separated by 25ns, resulting in an event rate of 40\MHz and an average of 25 inelastic proton-proton interactions, named pile-up (\PU) for each bunch crossing. 
%% CITE LHC TDE page 31 for 2808 bunches
%% CITE CMS VOL2, page 33 for pileup
This high event rate presents the experiments with the data acquisition and readout challenges, whilst retaining excellent signal to background resolution and sufficient radiation hardness in order to withstand the expected fluence.

The primary motivation behind operating the LHC in a heavy-ion mode is to search for evidence of the plasma of quarks and gluons, which is made possible through the resultant production of QCD matter under extreme temperature, density and low momentum fractions of partons~\cite{Baur:687318}.

\subsubsection{Accelerator Complex}
When operating in proton-proton mode, the preparation of the LHC beams starts at Linear accelerator 2 (Linac2). 
Protons from a hydrogen gas source are accelerated to 50\MeV and are injected into the Proton Synchrotron Booster which accelerates the protons to 1.4\GeV before injection into the Proton Synchrotron (PS). 
In the PS, the protons are accelerated to 26\GeV and are injected into the Super Proton Synchrotron (SPS) where they are accelerated to 450\GeV before finally entering the LHC~\ref{fig:cern-accelerator-complex}. 
When operating with lead ions, Linear accelerator 3 (Linac3) is used to initially accelerate the ions before injecting them into the Proton Synchrotron Booster, before the ions use the same accelerators as the protons do to prepare them for use in the LHC\~cite{Bruning:782076}. 

Sixteen Radio Frequency (RF) cavities (eight per beam), each operating at frequency of 400\MHz, at a temperature of 4.5K, and delivering a maximum of 2 MV, are used to accelerate the two beams up to their designed operational energies of 7\TeV over the course of circa twenty minutes.
Each of the two beams are accelerated in separate beam pipes, circulating in opposite directions,and requires 1232 dipole magnets to bend them along their circular path and 392 quadrupole magnets to focus them, with each magnet producing a 8.3T field whilst operating at 1.9K.
A more detailed description of the LHC accelerator chain at CERN can be found in~\cite{Schindl:397574}. 

\begin{figure}[htbp]
\begin{center}
\includegraphics[width=0.97\textwidth]{figs/lhc/Cern-Accelerator-Complex.jpg}
\caption{CERN complex, including the various linear accelerators, synchrotrons, LHC, LHC detectors and other aspects of the complex.}
\label{fig:cern-accelerator-complex}
\end{center}
\end{figure}

\subsection{The Compact Muon Solenoid}\label{subsec:cms}

\subsubsection{Overview}
The Compact Muon Solenoid (CMS) is a large, general purpose, hermetic particle detector and the smaller of the two multi-purpose experiments operating at the LHC at CERN.
The experiment is divided into a central cylindrical barrel section and two endcap disk sections at each end of the barrel.
A superconducting solenoid encompasses, moving from the interaction point at the centre of the detector outwards, an all silicon tracking detector, a homogeneous lead tungstate ($PbWO_{4}$) electromagnetic calorimeter (ECAL)and hadronic calorimeter (HCAL) comprised of plastic scintillating tiles interspaced with brass absorbers.
Beyond the solenoid there is an outer hadronic calorimeter (HO) and interspaced between the iron return yoke are three different types of Muon Detectors.
There is also a pair of very-forward calorimeters (HF) in the extended rapidity region\cite{oldcms}.

These detectors were designed in order to investigate the wide range of physics phenomena in the LHC's physics program, resulting in the accurate and precise identification and measurement of electrons, photons, jets and muons over both a large energy and momenta range.
Full detector resolution is achieved across $|\eta| < 3.0$, with the hadronic calorimetry having an extended coverage up to $|\eta| < 5.0$ in order to ensure good dijet mass and \MET resolutions.
Sufficient radiation hardness for the expected high fluence and data acquisition and trigger systems required to handle to event rate of the LHC environment had to be considered in the design of the various detectors.

The coordinate system adopted by the CMS experiment has the origin at the nominal interaction point at the centre of the detector. 
The z-axis is parallel to the anti-clockwise proton beam (i.e. towards the Jura mountains from the detector), the x-axis points towards the centre of the LHC, and the y-axis points vertically upwards.
The azimuthal angle, \phi, is the angle measured from the x-axis in the x-y plane and the polar angle, \theta, is the angle measured from the z-axis.
Pseudorapidity, defined as $\eta \equiv -ln\tan(\theta/2)$, is usually used in lieu of \theta as when the mass considered is negligible \eta converges towards rapidity, defined as $y \equiv	1/2 ln(E+p_{z}/E-p_{Z})$, which is Lorentz invariant along the z-axis.
As such, variables transverse to the z-axis (i.e. the beam line), such as the transverse energy (\ET), momentum (\pT), and missing energy (\MET), depend only on their x and y components.


\begin{figure}[htbp]
\begin{center}
\includegraphics[width=0.97\textwidth]{figs/cms/cms_120918_03.png}
\caption{Cutaway diagram of CMS’s layers, illustrating its onion-like nature and the location of the detecting technologies within.}
\label{fig:cern-accelerator-complex}
\end{center}
\end{figure}

%%%

\subsubsection{Tracker}
The tracker, surrounding the interaction point, is designed to provide efficient precision trajectory measurements of charged particles emerging from collisions and precise reconstruction of vertices, whilst operating in a harsh radiation environment (max flux $\approx 10^{7}/s$) and minimising the number charged particles interacting with the tracker (i.e. scattering, producing Bremsstrahlung).
Silicon fulfils these requirements and is used in the inner pixel detector, surrounding the interaction point, and microstrip detector, which encloses the pixel detector.
The high fluence expected closest to the interaction point requires the high granularity pixels provide in order to ensure a low channel occupancy, but the particle flux from $20cm > r$ is sufficiently low enough that microstrips can be used without compromising reconstruction efficiency.

Overall, the tracker measures 5.8m, with a 2.5m radius and provides coverage over $\eta < 2.5$.
The silicon microstrip detector is comprised of four parts: the Tracker Inner Barrel (TIB) and Tracker Inner Disks (TID) from $20 < r < 55\cm$, and the Tracker Outer Barrel (TOB) and Tracker EndCaps (TEC) from $55 < r < 116\cm$.
The sensors are single sided silicon wafers...
%%%

The original silicon pixel detector was comprised of three 53.3\cm long barrel layers at mean radii of 4.4, 7.3 and 10.2\cm and two endcap disks either side of the barrel at $|z| = 34.5 and 46.5\cm$ that extend from $r = 6.0 to 15\cm$.
Each of the 66 million pixels measures $100x150\mum^{2}$ and cover, a total surface area of 1.06$m^{2}$.
The sensors consist of n+-type implants on n-type silicon which are by indium bump-bonds to highly integrated readout chips (ROC).
The high resolution provided by the pixels allows for the precise calculation of the track 

%%Phase 1
A replacement pixel detector though is necessary before the LHC begins Phase-1 operations following Long Shutdown 2\cite{CMS:2012sda} as the ``Phase 0'' pixel detector was designed to operate a nominal instantaneous luminosity of $1x10^{34}\percms$.
With the increase in \PU from running at a higher instantaneous luminosity with the same 25\ns bunch spacing, the original pixel detector will be unable to cope with the increased rate without suffering track reconstruction efficiency degradation.

Therefore during the End of Year Technical Stop that took place between data taking in 2015 and 2016, the pixel detector was completely replaced.
Like the original pixel detector, the Phase 1 detector's 124 million pixels also measure $100x150\mum^{2}$ (covering a total surface area of 1.95 $m^{2}$) and the sensors are also n+-type implants on n-type silicon.

The Phase 1 Pixel detector is comprised of four 54.9\cm long barrel layers at mean radii of 3.0, 6.8, 10.9 and 16.0\cm and three endcap disks at each end of the barrel at $|z| = 29.1, 39.6 and 51.6\cm$ that extend from $r = 4.5 to 16.1\cm$.

Collectively, the barrel layers and endcap disks, have been optimise

%First results for phase-1 \cite{Sonneveld:2297549}

\subsubsection{Electromagnetic Calorimeter}
Beyond the tracker, the ECAL, a homogeneous calorimeter, measures the energies of electrons and photons using lead tungstate scintillating crystals. 
The choice of using lead tungstate crystals was based on the needs of both having a compact detector which could fit with the HCAL inside the solenoid and containing the showers' energy within this calorimeter, which were met with its short radiation length (0.89\cm) and small Molier\'{e} radius (2.2\cm).

61,200 crystals are mounted in the barrel, with 7,324 crystals for each endcap.
As the crystals only emit a small amount of scintillation light, the photodetectors used to amplify the light must be able to operate within the solenoid's field and and withstand the high radiation environment.
Avalanche photosdiodes and the more radiation hard vacuum photodiodes are used in the barrel and endcap regions respectively.
The emitted light emitted by these crystals is short, well defined and fast, with 80\% collected within one 25\ns bunch crossing, with the signals being digitised on-detector and buffered until a Level-1 Trigger decision has been made.
Information to the Level-1 Calorimeter Trigger

The barrel and endcap cystal systems are supplemented by a Preshower (ES) device, located in front of the ECAL endcaps, for discrimination between neutral pions and photons within the fidicial region $1.653 < |\eta| < 2.6$.
For each detector, two lead radiators initiate the electromagnetic showers and two silicon strip sensors, orthogonal to one another to provide fine resolution, are placed after the radiators measure the energy deposited.
The thickness of the radiators was chosen to ensure ~95\% of incident photons shower before reaching the second silicon strip sensor, namely two and one radiation lengths for the first and second lead radiators respectively.

%Following the excellent performance during Run I of the LHC, with an energy resolution of 0.3\% exceeding the design value of 0.5\%, the ECAL has continued to perform admirably, with .... \cite{TeixeiradeLima:2017tmj} %%ECAL performance Run II

\subsubsection{Hadronic Calorimeter}
Hadronic particles penetrate through the ECAL into the HCAL, where hadronic jets have their energies measured and are contained for determination of the missing transverse energy and protection of the muon detectors~\cite{HCAL:tdr}.
As such, the HCAL was designed to have as much absorber material within the solenoid coil as practical. 
The barrel (HB) and and endcap (HE) both use plastic scintillator tiles interspersed between brass and steel absorber plates, with the latter being used for the external plates for structural strengthening.
Wavelength shifting fibres embedding in the tiles converts the scintillated light and channels it to hybrid photodiodes.
The HB covers the rapidity range $|\eta| < 1.4$, with the HE overlapping it and providing coverage over the range $1.3 < |\eta| < 3.0$.

Due to space constraints within the solenoid, the HB cannot fully contain hadronic showers and as such is supplemented by an additional calorimeter in the barrel region outside the coil (HO) \footnote{Given the outer hadronic calorimeter's limited size and function, it will not be discussed further here. A thorough description of the HO can be found in~\cite{HO}}.

The forward calorimeters (HF) overlap with the HE and cover the $2.9 < \eta < 5.0$ rapidity region \cite{HF}.
As the forward region experiences the most severe radiation environment, the technology used must be able to withstand such large radiation doses($~10^{9}$ rad). 
Interspaced between steel absorbers, quartz fibres are used produce Cherenkov light due to their radiation hardness, fast response time, production of Cherenkov radiation above a certain energy threshold (thus ignoring low energy particles), and ability to give directional information due to the light being strongly correlated with the showers' trajectories.
The Cherenkov light produced is transmitted down the fibres to individually shielded photomultiplier tubes contained in readout boxes.

\subsubsection{The Superconducting Solenoid}
One of the defining features of the CMS detector is the superconducting solenoid which encompasses the silicon tracker and calorimetry.
The 220T cylindrical coil measures 13m long, has a 5.9m inner diameter, is situated inside a vacuum tank where it is cooled to its operation temperature by liquid helium to 4.5K, and operates at magnetic field of 3.8 Tesla\footnote{Whilst the solenoid was designed to operate at 4T, the CMS collaboration chose to operate it at 3.8T in order maximise the lifetime of the apparatus}.
The large bending power within the solenoid not only provides excellent momentum resolution for charged particles within the tracking detector, but it also prevents low transverse momentum charged particles from reaching the calorimetry and negatively impacting on energy resolution and isolation efficiency.
An iron return yoke guides and contains the return magnet field, which is sufficiently strong (~1.7T in the barrel and outermost endcap disk) enough to enable accurate momentum resolution for tracking and charge identification of high momentum (~1\TeVc) muons.

\subsubsection{Muon detectors}
Detecting muons is incredibly important for CMS (as implied by the experiment’s name), given many of the signatures of interesting events involve them, including those from SUSY models and the so called “gold-plated” SM Higgs decay into a pair of $Z^{0}$ bosons, which in turn decay into four muons . 
Being Minimum Ionising Particles (MIPs), muons pass through the detector and past the magnet with minimal interaction.
Consequently, the muon systems are placed outside the solenoid and provide a strong clean signals which can be triggered upon.

Given that the magnetic field outside the solenoid is non-uniform and the radiation environment varies, differing detector technologies are used in order to provide a high performance system which delivers the fast identification and momentum resolution required. 
Interspaced between the iron return yoke rings and disks are three gaseous detector technologies: Drift Tubes (DTs), Cathode Strip Chambers (CSCs) and Resistive Plate Chambers (RPCs).

The DTs operate in the barrel region across $|\eta| < 1.2$, where the magnetic field strength is low as most of the return field is contained in the iron yoke,	and are organised into four stations cylindrical of layers.
For each of the four stations, the DT chambers are subdivided into three ``superlayers'' (/SLs), comprised of four layers of DTs, where the outer SLs measure coordinates in the r-\phi plane and the inner SL measures in the r-z plane (which the outermost station lacks), which provides point resolutions of $\approx 200\mum$ and a \phi directional precision of $\approx 1 mrad$.

CSCs are employed in the endcaps across $0.9 < \eta < 2.4$ , where the mangetic field is non-uniform and there is a higher rate of muons than in the barrel, and are organised into four stations of concentric disks.
%%? 
Each CSC is composed of six gas gaps, with six anode wires running almost perpendicularly between cathode panels, where one panel is continous and the other


RPCs provide coverage over $|\eta| < 1.8$\footnote{Originally coverage only extended to $|\eta| < 1.6$, instead of the planned $|\eta| < 2.1$, for financial reasons. During Long Shutdown 1 (), a fourth endcap disk with RPCs was installed which extended coverage up to $|\eta| < 1.8$\cite{Battilana:2017mrm}}, which whilst having coarser position resolution than the DTs and CPCs, have fast response times and excellent time resolution.
As such, RPCs provide addition but complimentary input to trigger decisions.
%% What are they made of


\subsubsection{Trigger and Data Acquisition Systems}
At design luminosity, the LHC bunch crossing (BX) rate of 40\MHz leads to an event rate of $\approx~10^{9}$ inelastic events per second.
This equates to 
Given the impossibility of storing such a volume of data, let alone reading all of it off the detector, the trigger system has to drastically reduce the data rate by selecting ``interesting'' events for storage for later analysis.

\subsubsection{Level-1 Trigger}
The first step is the Level-1 (L1) Trigger, consisting of custom-designed programmable hardware (FPGA technology where possible). 
Initially both the calorimeter and muon triggers search over a small local area for the signature of an interesting event, forwarding these onto the regional triggers which sorts the candidates in order of importance, before the global calorimeter and muon triggers determine the highest ranked objects across the entire experiment. 
These are sent to the Global Trigger, which either rejects an event or accepts it for further evaluation by the second step, the High-Level-Trigger (HLT), a software system (see Fig.~\ref{fig:trigger} for a more detailed breakdown). 
Events accepted by the HLT are then transferred to mass storage for offline storage and analysis\cite{oldcms}. 

The L-1 trigger analyses every bunch crossing (BX). 
As such, there are strict time limitations on how long it takes for the data can be collected and read out. 
As the selection cannot be done before the subsequent BX, the current L-1 trigger uses a pipelined approach, providing a latency of $\approx$ 3.5\mus . 
Within the latency constraint for reducing the data rate, the L-1 trigger has to deal with the effects of the pileup of events, both in-time (within the same BX) and out-of-time (events from different BXs), in each BX . 
Additionally, the constraints on bandwidth limits the volume of data a single board can receive and determining whether events being read in. 
In light of this, the current approach of having large amounts of data over small regions being brought to fewer boards so that objects of interest can be considered, has to discard data at each stage a larger region is considered . 
While this approach creates candidates within these constraints, by definition only the candidates from this coarser data set can be considered. 
Any candidates in the discarded data are lost\cite{oldcms}.

\begin{figure}[htbp]
\begin{center}
\includegraphics[width=0.97\textwidth]{figs/cms/trigger.png}
\caption{L-1 Trigger Architecture. Both muon and calorimeter triggers search for candidates locally before creating coarser datasets by passing on the most promising candidates to a higher level, and so on until the Global Trigger makes a final decision. However, unlike the Calorimeter Trigger, which looks at all the calorimeter systems concurrently, the Muon Trigger locally triggers on each of its detector technologies separately before submitting them to the Global Muon Trigger (with input from the Regional Calorimeter Trigger) before passing on fitted candidates to the Global Trigger.}
\label{fig:trigger}
\end{center}
\end{figure}

%ECAL and trigger primitives generated and , with the former being buffered until the Level-1 Calorimeter makes a decision based off the latter.

